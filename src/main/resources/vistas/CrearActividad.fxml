<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.web.WebView?>
<?import javafx.geometry.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.planify.planifyplus.controller.CrearActividadController"
            style="-fx-background-color: #F5F8FB;">

    <!-- BARRA SUPERIOR -->
    <top>
        <HBox spacing="18" alignment="CENTER_LEFT"
              style="-fx-padding: 22; -fx-background-color: #F2F4F8;">

            <Button text="â† Volver"
                    onAction="#handleVolver"
                    style="-fx-background-color: #E5E7EB;
                           -fx-text-fill: #222;
                           -fx-background-radius: 15;
                           -fx-font-size: 15;
                           -fx-cursor: hand;"/>

            <Label text="PlanifyPlus"
                   style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #1563e2;"/>

            <Region HBox.hgrow="ALWAYS"/>
        </HBox>
    </top>

    <!-- FORMULARIO -->
    <center>
        <ScrollPane fitToWidth="true"
                    style="-fx-background-color: transparent;">
            <VBox alignment="TOP_CENTER" spacing="0"
                  style="-fx-padding: 40 20 40 20;">

                <VBox maxWidth="750" spacing="24"
                      style="-fx-background-color: white;
                             -fx-padding: 40 36 40 36;
                             -fx-background-radius: 18;
                             -fx-border-color: #E5E7EB;
                             -fx-border-width: 1.5;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 10, 0, 0, 2);">

                    <!-- TÃ­tulo -->
                    <VBox spacing="8">
                        <Label fx:id="lblTituloPagina" text="Crear Nueva Actividad"
                               style="-fx-font-size: 26; -fx-font-weight: bold; -fx-text-fill: #1F2937;"/>
                        <Label text="Organiza un evento para tu comunidad"
                               style="-fx-font-size: 15; -fx-text-fill: #6B7280;"/>
                    </VBox>

                    <Separator style="-fx-background-color: #E5E7EB;"/>

                    <!-- Campo: TÃ­tulo -->
                    <VBox spacing="8">
                        <Label text="TÃ­tulo de la actividad *"
                               style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
                        <TextField fx:id="txtTitulo"
                                   promptText="ej. Clase de Yoga al Aire Libre"
                                   style="-fx-font-size: 15; -fx-padding: 12 14;
                                          -fx-background-radius: 8; -fx-border-radius: 8;
                                          -fx-border-color: #E5E7EB; -fx-border-width: 1;"/>
                    </VBox>

                    <!-- Campo: DescripciÃ³n -->
                    <VBox spacing="8">
                        <Label text="DescripciÃ³n *"
                               style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
                        <TextArea fx:id="txtDescripcion"
                                  promptText="Describe tu actividad, quÃ© incluye, quÃ© deben llevar los participantes..."
                                  wrapText="true"
                                  prefRowCount="4"
                                  style="-fx-font-size: 14; -fx-padding: 10 14;
                                         -fx-background-radius: 8; -fx-border-radius: 8;
                                         -fx-border-color: #E5E7EB; -fx-border-width: 1;"/>
                    </VBox>

                    <!-- Fecha y Hora -->
                    <HBox spacing="16">
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Fecha *"
                                   style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
                            <DatePicker fx:id="dpFecha"
                                        promptText="Selecciona una fecha"
                                        prefWidth="300"
                                        style="-fx-background-radius: 8;"/>
                        </VBox>

                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Hora (HH:mm) *"
                                   style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
                            <TextField fx:id="txtHora"
                                       promptText="ej. 18:30"
                                       style="-fx-font-size: 15; -fx-padding: 12 14;
                                              -fx-background-radius: 8; -fx-border-radius: 8;
                                              -fx-border-color: #E5E7EB; -fx-border-width: 1;"/>
                        </VBox>
                    </HBox>

                    <!-- Tipo -->
                    <VBox spacing="8">
                        <Label text="Tipo de actividad *"
                               style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
                        <ComboBox fx:id="cmbTipo"
                                  promptText="Selecciona un tipo"
                                  prefWidth="300"
                                  style="-fx-background-radius: 8;"/>
                    </VBox>

                    <!-- BUSCADOR DE UBICACIÃ“N CON WEBVIEW -->
                    <VBox spacing="10">
                        <Label text="UbicaciÃ³n *"
                               style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
                        <Label text="ðŸ“ Busca y selecciona la ubicaciÃ³n exacta del evento"
                               style="-fx-font-size: 13; -fx-text-fill: #6B7280;"/>

                        <!-- WebView MÃS GRANDE -->
                        <VBox style="-fx-border-color: #D1D5DB; -fx-border-width: 2;
                                     -fx-border-radius: 12; -fx-background-radius: 12;
                                     -fx-background-color: white;">
                            <WebView fx:id="webViewBuscador"
                                     prefHeight="420"
                                     minHeight="400"
                                     maxHeight="500"
                                     style="-fx-background-color: white;"/>
                        </VBox>

                        <!-- Campo para mostrar la ubicaciÃ³n seleccionada -->
                        <VBox spacing="8" style="-fx-padding: 8 0 0 0;">
                            <Label text="âœ“ UbicaciÃ³n seleccionada:"
                                   style="-fx-font-size: 13; -fx-font-weight: bold; -fx-text-fill: #1563e2;"/>
                            <TextField fx:id="txtUbicacion"
                                       editable="false"
                                       promptText="Ninguna ubicaciÃ³n seleccionada aÃºn"
                                       style="-fx-font-size: 14; -fx-padding: 12 14;
                                              -fx-background-color: #EFF6FF;
                                              -fx-border-color: #1563e2;
                                              -fx-border-width: 2;
                                              -fx-border-radius: 8;
                                              -fx-background-radius: 8;
                                              -fx-text-fill: #1e40af;"/>
                        </VBox>
                    </VBox>

                    <!-- Ciudad -->
                    <VBox spacing="8">
                        <Label text="Ciudad *"
                               style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
                        <TextField fx:id="txtCiudad"
                                   promptText="ej. Sevilla"
                                   style="-fx-font-size: 15; -fx-padding: 12 14;
                                          -fx-background-radius: 8; -fx-border-radius: 8;
                                          -fx-border-color: #E5E7EB; -fx-border-width: 1;"/>
                        <Label text="ðŸ’¡ Escribe la ciudad para mejorar las bÃºsquedas de ubicaciÃ³n"
                               style="-fx-font-size: 12; -fx-text-fill: #6B7280; -fx-font-style: italic;"/>
                    </VBox>

                    <!-- Aforo -->
                    <VBox spacing="8">
                        <Label text="Aforo mÃ¡ximo *"
                               style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
                        <TextField fx:id="txtAforo"
                                   promptText="ej. 20"
                                   prefWidth="150"
                                   style="-fx-font-size: 15; -fx-padding: 12 14;
                                          -fx-background-radius: 8; -fx-border-radius: 8;
                                          -fx-border-color: #E5E7EB; -fx-border-width: 1;"/>
                        <Label text="NÃºmero de personas que pueden inscribirse"
                               style="-fx-font-size: 13; -fx-text-fill: #6B7280;"/>
                    </VBox>

                    <!-- Campos ocultos para coordenadas -->
                    <TextField fx:id="txtLatitud" visible="false" managed="false"/>
                    <TextField fx:id="txtLongitud" visible="false" managed="false"/>

                    <!-- Botones -->
                    <HBox spacing="12" alignment="CENTER" style="-fx-padding: 20 0 0 0;">
                        <Button text="Cancelar"
                                onAction="#handleVolver"
                                style="-fx-background-color: #E5E7EB;
                                       -fx-text-fill: #374151;
                                       -fx-background-radius: 22;
                                       -fx-font-size: 16;
                                       -fx-font-weight: bold;
                                       -fx-padding: 12 36 12 36;
                                       -fx-cursor: hand;"
                                prefWidth="200"/>

                        <Button fx:id="btnGuardar"
                                text="Crear Actividad"
                                onAction="#handleGuardarActividad"
                                style="-fx-background-color: #1563e2;
                                       -fx-text-fill: white;
                                       -fx-background-radius: 22;
                                       -fx-font-size: 16;
                                       -fx-font-weight: bold;
                                       -fx-padding: 12 36 12 36;
                                       -fx-cursor: hand;"
                                prefWidth="200"/>
                    </HBox>

                </VBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>
