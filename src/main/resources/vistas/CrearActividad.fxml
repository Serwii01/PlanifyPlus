<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.web.*?>

<BorderPane xmlns="http://javafx.com/javafx/25"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.planify.planifyplus.controller.CrearActividadController"
            style="-fx-background-color: #F5F8FB;">

    <!-- BARRA SUPERIOR -->
    <top>
        <HBox spacing="18" alignment="CENTER_LEFT"
              style="-fx-padding: 22; -fx-background-color: #F2F4F8;">

            <!-- Bot칩n Inicio -->
            <Button fx:id="btnHome"
                    text="游"
                    onAction="#onIrInicio"
                    style="-fx-background-color: transparent; -fx-font-size: 20px; -fx-cursor: hand;"/>

            <!-- Logo + nombre app -->
            <HBox alignment="CENTER_LEFT" spacing="12">
                <ImageView fx:id="logoImage"
                           fitHeight="34" fitWidth="34"
                           preserveRatio="true" pickOnBounds="true"/>
                <Label text="PlanifyPlus"
                       style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #1563e2;"/>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Info usuario (ya est치 logueado) -->
            <Label fx:id="lblCiudad" text="Ciudad"
                   style="-fx-background-color: #e7eaf3;
                          -fx-padding: 4 18 4 18;
                          -fx-background-radius: 16;
                          -fx-font-size: 15;
                          -fx-font-weight: bold;"/>

            <Label fx:id="lblUser" text="U"
                   style="-fx-background-color: #1563e2;
                          -fx-text-fill: white;
                          -fx-padding: 6 18 6 18;
                          -fx-background-radius: 16;
                          -fx-font-size: 15;
                          -fx-font-weight: bold;"/>

            <Button fx:id="btnPerfil"
                    text="Mi Perfil"
                    onAction="#onIrPerfil"
                    style="-fx-background-color: #E5E7EB;
                           -fx-text-fill: #222;
                           -fx-background-radius: 15;
                           -fx-font-size: 15;"/>

            <Button fx:id="btnLogout"
                    text="Cerrar sesi칩n"
                    onAction="#onLogout"
                    style="-fx-background-color: #E5E7EB;
                           -fx-text-fill: #222;
                           -fx-background-radius: 15;
                           -fx-font-size: 15;"/>
        </HBox>
    </top>

    <!-- CONTENIDO CENTRAL: FORMULARIO CREAR ACTIVIDAD -->
    <center>
        <StackPane>
            <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
                <VBox alignment="TOP_CENTER"
                      spacing="24"
                      style="-fx-padding: 36 0 36 0;">

                    <Label text="Crear nueva actividad"
                           style="-fx-font-size: 22;
                                  -fx-text-fill: #1563e2;
                                  -fx-font-weight: bold;"/>

                    <!-- Tarjeta blanca con formulario -->
                    <BorderPane maxWidth="900"
                                style="-fx-background-color: white;
                                       -fx-background-radius: 18;
                                       -fx-padding: 28;
                                       -fx-effect: dropshadow(gaussian, #D0D7E2, 10, 0.35, 0, 4);">

                        <center>
                            <VBox spacing="16">

                                <!-- T칈TULO (ocupa toda la fila) -->
                                <VBox spacing="6">
                                    <Label text="T칤tulo" style="-fx-font-weight: bold;"/>
                                    <TextField fx:id="txtTitulo"
                                               promptText="Ej: Partido de f칰tbol amistoso"
                                               style="-fx-pref-width: 840;"/>
                                </VBox>

                                <!-- FILA: CATEGOR칈A + CIUDAD + PLAZAS -->
                                <HBox spacing="20">
                                    <!-- Categor칤a -->
                                    <VBox spacing="6" HBox.hgrow="ALWAYS">
                                        <Label text="Categor칤a" style="-fx-font-weight: bold;"/>
                                        <ComboBox fx:id="cmbCategoria"
                                                  promptText="Selecciona categor칤a"
                                                  maxWidth="Infinity"/>
                                    </VBox>

                                    <!-- Ciudad -->
                                    <VBox spacing="6" HBox.hgrow="ALWAYS">
                                        <Label text="Ciudad" style="-fx-font-weight: bold;"/>
                                        <TextField fx:id="txtCiudad"
                                                   promptText="Sevilla..."/>
                                    </VBox>

                                    <!-- Plazas m치ximas -->
                                    <VBox spacing="6">
                                        <Label text="Plazas m치ximas" style="-fx-font-weight: bold;"/>
                                        <Spinner fx:id="spnPlazas"
                                                 style="-fx-pref-width: 120;"/>
                                    </VBox>
                                </HBox>

                                <!-- BUSCADOR DE UBICACI칍N (m치s espacio vertical) -->
                                <VBox spacing="6">
                                    <Label text="Ubicaci칩n (busca en el mapa)"
                                           style="-fx-font-weight: bold;"/>
                                    <WebView fx:id="webViewBuscador"
                                             prefHeight="180"
                                             style="-fx-background-color: transparent;"/>
                                </VBox>

                                <!-- FILA: FECHA + HORA -->
                                <HBox spacing="20">
                                    <!-- Fecha -->
                                    <VBox spacing="6" HBox.hgrow="ALWAYS">
                                        <Label text="Fecha" style="-fx-font-weight: bold;"/>
                                        <DatePicker fx:id="dpFecha"
                                                    maxWidth="Infinity"/>
                                    </VBox>

                                    <!-- Hora -->
                                    <VBox spacing="6" HBox.hgrow="ALWAYS">
                                        <Label text="Hora" style="-fx-font-weight: bold;"/>
                                        <TextField fx:id="txtHora"
                                                   promptText="13:30"/>
                                    </VBox>
                                </HBox>

                                <!-- DESCRIPCI칍N (ocupa toda la fila) -->
                                <VBox spacing="6">
                                    <Label text="Descripci칩n" style="-fx-font-weight: bold;"/>
                                    <TextArea fx:id="txtDescripcion"
                                              promptText="Describe brevemente la actividad..."
                                              prefRowCount="4"/>
                                </VBox>

                            </VBox>
                        </center>

                        <!-- Botones abajo -->
                        <bottom>
                            <HBox spacing="12" alignment="CENTER_RIGHT"
                                  style="-fx-padding: 22 0 0 0;">
                                <Region HBox.hgrow="ALWAYS"/>

                                <Button fx:id="btnCancelar"
                                        text="Cancelar"
                                        onAction="#onCancelar"
                                        style="-fx-background-color: #E5E7EB;
                                               -fx-text-fill: #111827;
                                               -fx-background-radius: 20;
                                               -fx-padding: 8 20;"/>

                                <Button fx:id="btnGuardar"
                                        text="Crear actividad"
                                        onAction="#onGuardarActividad"
                                        style="-fx-background-color: #1563e2;
                                               -fx-text-fill: white;
                                               -fx-background-radius: 22;
                                               -fx-padding: 8 26;
                                               -fx-effect: dropshadow(gaussian, #1563e2, 3, 0.4, 0, 2);"/>
                            </HBox>
                        </bottom>

                    </BorderPane>
                </VBox>
            </ScrollPane>
        </StackPane>
    </center>
</BorderPane>
