<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.geometry.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.planify.planifyplus.controller.InicioController"
            style="-fx-background-color: white;">

    <top>
        <HBox style="-fx-padding: 16 28 16 28; -fx-background-color: #F2F4F8;"
              spacing="18"
              alignment="CENTER_LEFT">

            <!-- LOGO + NOMBRE -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <ImageView fx:id="logoImage"
                           fitHeight="50" fitWidth="50"
                           preserveRatio="true"
                           pickOnBounds="true"/>

                <Label text="PlanifyPlus"
                       style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #1563e2;"/>

                <Label fx:id="lblAdminBadge"
                       text="ðŸ›¡ Admin"
                       style="-fx-background-color: #FEE2E2;
                          -fx-text-fill: #B91C1C;
                          -fx-padding: 4 14 4 14;
                          -fx-background-radius: 16;
                          -fx-font-weight: bold;
                          -fx-font-size: 13;"
                       visible="false"
                       managed="false"/>
            </HBox>

            <!-- BUSCADOR -->
            <TextField fx:id="searchBar"
                       promptText="Buscar actividades..."
                       style="-fx-font-size: 15; -fx-padding: 8 14 8 14;"
                       prefWidth="400"
                       maxWidth="500"/>

            <!-- SPACER -->
            <Region HBox.hgrow="ALWAYS"/>

            <!-- BOTONES SIN SESIÃ“N -->
            <HBox fx:id="hboxSinSesion" alignment="CENTER_RIGHT" spacing="10" visible="true">
                <Button fx:id="btnRegister"
                        text="Registrarse"
                        onAction="#handleRegister"
                        style="-fx-background-color: #60A5FA;
                           -fx-text-fill: white;
                           -fx-background-radius: 20;
                           -fx-font-size: 14;
                           -fx-padding: 8 20 8 20;"/>

                <Button fx:id="btnLogin"
                        text="Iniciar sesiÃ³n"
                        onAction="#handleLogin"
                        style="-fx-background-color: white;
                           -fx-text-fill: #222;
                           -fx-background-radius: 20;
                           -fx-font-size: 14;
                           -fx-padding: 8 20 8 20;
                           -fx-border-color: #D1D5DB;
                           -fx-border-width: 1.5;
                           -fx-border-radius: 20;"/>
            </HBox>

            <!-- BOTONES CON SESIÃ“N -->
            <HBox fx:id="hboxConSesion" alignment="CENTER_RIGHT" spacing="10" visible="false" managed="false">
                <Label fx:id="lblCiudad"
                       text="Sevilla"
                       style="-fx-background-color: #e7eaf3;
                          -fx-padding: 6 16 6 16;
                          -fx-background-radius: 18;
                          -fx-font-size: 14;
                          -fx-font-weight: bold;
                          -fx-text-fill: #333;"/>

                <Label fx:id="lblUser"
                       text="Usuario"
                       style="-fx-background-color: #1563e2;
                          -fx-text-fill: white;
                          -fx-padding: 6 16 6 16;
                          -fx-background-radius: 18;
                          -fx-font-size: 14;
                          -fx-font-weight: bold;"/>

                <Button fx:id="btnPerfil"
                        text="Mi Perfil"
                        onAction="#handlePerfil"
                        style="-fx-background-color: #E5E7EB;
                           -fx-text-fill: #222;
                           -fx-background-radius: 18;
                           -fx-font-size: 14;
                           -fx-padding: 8 18 8 18;"/>

                <Button fx:id="btnLogout"
                        text="Cerrar sesiÃ³n"
                        onAction="#handleLogout"
                        style="-fx-background-color: #E5E7EB;
                           -fx-text-fill: #222;
                           -fx-background-radius: 18;
                           -fx-font-size: 14;
                           -fx-padding: 8 18 8 18;"/>

                <Button fx:id="btnCrearActividad"
                        text="Crear Actividad"
                        onAction="#handleCrearActividad"
                        style="-fx-background-color: #1563e2;
                           -fx-text-fill: white;
                           -fx-background-radius: 18;
                           -fx-font-size: 14;
                           -fx-font-weight: bold;
                           -fx-padding: 8 20 8 20;
                           -fx-effect: dropshadow(gaussian, #1563e2, 3, 0.3, 0, 1);"/>
            </HBox>

        </HBox>
    </top>

    <!-- ================= CONTENIDO PRINCIPAL (FONDO BLANCO) ================= -->
    <center>
        <GridPane hgap="48"
                  alignment="TOP_CENTER"
                  style="-fx-padding: 36; -fx-background-color: white;"
                  maxWidth="1400">

            <columnConstraints>
                <ColumnConstraints percentWidth="50" hgrow="ALWAYS"/>
                <ColumnConstraints percentWidth="50" hgrow="ALWAYS"/>
            </columnConstraints>

            <rowConstraints>
                <RowConstraints vgrow="ALWAYS"/>
            </rowConstraints>

            <!-- Panel Izquierdo -->
            <VBox fx:id="actividadesComunidadBox"
                  GridPane.columnIndex="0"
                  GridPane.rowIndex="0"
                  spacing="20"
                  alignment="TOP_CENTER"
                  minWidth="0">

                <!-- TÃTULO + FILTRO CON ALTURA FIJA -->
                <VBox spacing="0" alignment="CENTER" prefHeight="50" minHeight="50" maxHeight="50">
                    <HBox spacing="12" alignment="CENTER">
                        <Label text="Actividades de la Comunidad"
                               style="-fx-font-size: 20;
                                      -fx-text-fill: #1563e2;
                                      -fx-font-weight: bold;"/>

                        <ComboBox fx:id="cmbDistancia"
                                  promptText="Todas las distancias"
                                  prefWidth="200"
                                  minWidth="200"
                                  maxWidth="200"
                                  minHeight="42"
                                  maxHeight="42"
                                  style="-fx-font-size: 13;
                 -fx-background-color: white;
                 -fx-background-radius: 8;
                 -fx-border-color: #E5E7EB;
                 -fx-border-radius: 8;
                 -fx-border-width: 1.5;
                 -fx-padding: 10 12 10 12;"/>

                    </HBox>
                </VBox>

                <ScrollPane fx:id="scrollActividadesComunidad"
                            fitToWidth="true"
                            hbarPolicy="NEVER"
                            vbarPolicy="AS_NEEDED"
                            style="-fx-background: transparent;
                                   -fx-background-color: transparent;"
                            VBox.vgrow="ALWAYS">
                    <content>
                        <VBox fx:id="contenedorComunidad"
                              spacing="17"
                              alignment="TOP_CENTER"
                              style="-fx-background-color: transparent;
                                     -fx-padding: 6;"/>
                    </content>
                </ScrollPane>
            </VBox>

            <!-- Panel Derecho -->
            <VBox fx:id="actividadesUsuarioBox"
                  GridPane.columnIndex="1"
                  GridPane.rowIndex="0"
                  spacing="20"
                  alignment="TOP_CENTER"
                  minWidth="0">

                <!-- TÃTULO CON LA MISMA ALTURA FIJA -->
                <VBox spacing="0" alignment="CENTER" prefHeight="50" minHeight="50" maxHeight="50">
                    <Label fx:id="lblTituloPanelDerecho"
                           text="Mis Actividades Creadas"
                           style="-fx-font-size: 20;
                                  -fx-text-fill: #1563e2;
                                  -fx-font-weight: bold;"/>
                </VBox>

                <StackPane VBox.vgrow="ALWAYS" maxWidth="Infinity">

                    <Label fx:id="lblNoSesion"
                           text="Inicia sesiÃ³n para ver tus actividades"
                           alignment="CENTER"
                           style="-fx-font-size: 16;
                                  -fx-text-fill: #999;"/>

                    <ScrollPane fx:id="scrollActividadesUsuario"
                                fitToWidth="true"
                                visible="false"
                                hbarPolicy="NEVER"
                                vbarPolicy="AS_NEEDED"
                                style="-fx-background: transparent;
                                       -fx-background-color: transparent;"
                                VBox.vgrow="ALWAYS">
                        <content>
                            <VBox fx:id="contenedorUsuario"
                                  spacing="17"
                                  alignment="TOP_CENTER"
                                  style="-fx-background-color: transparent;
                                         -fx-padding: 6;"/>
                        </content>
                    </ScrollPane>

                </StackPane>
            </VBox>

        </GridPane>
    </center>

    <!-- ================= APARTADO LEGAL ================= -->
    <bottom>
        <HBox alignment="CENTER_RIGHT" style="-fx-padding: 20 40 20 0; -fx-background-color: #F8FAFC;">
            <Button fx:id="btnLegal"
                    text="Aviso Legal"
                    onAction="#mostrarLegal"
                    style="-fx-background-color: transparent;
                           -fx-text-fill: #6B7280;
                           -fx-font-size: 14;
                           -fx-cursor: hand;
                           -fx-underline: true;
                           -fx-padding: 0 0 0 20;"/>
        </HBox>
    </bottom>

</BorderPane>
